blocks:
  - name: "Build Spring Boot Backend"
    commands:
      - run: cd backend
      - run: ./mvnw clean package
    artifactPaths:
      - backend/target/*.jar

  - name: "Build React Frontend"
    commands:
      - run: cd frontend
      - run: npm install
      - run: npm run build
    artifactPaths:
      - frontend/build/**

  - name: "Deploy Backend"
    deploy: webapp-io-deployment
    environment:
      - SPRING_PROFILES_ACTIVE: production
    commands:
      - run: java -jar backend/target/your-spring-boot-application.jar

  - name: "Deploy Frontend"
    deploy: webapp-io-deployment
    environment:
      - PUBLIC_URL: /your-frontend-path
    commands:
      - run: |
          rm -rf /var/www/html/your-frontend-path
          cp -R frontend/build/* /var/www/html/your-frontend-path
